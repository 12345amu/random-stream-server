<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Random Number Stream</title>
</head>
<body>
  <h1>Live Random Number Stream</h1>
  <div id="log">Waiting for data...</div>

  <script>
  const log = document.getElementById('log');
  const evtSource = new EventSource('/stream');

  evtSource.onmessage = (event) => {
    const data = JSON.parse(event.data);
    const entry = document.createElement('div');
    entry.textContent = event.data;

  const timeSpan = document.createElement('span');
  timeSpan.className = 'time';
  timeSpan.textContent = new Date(data.time).toLocaleTimeString();

  const valueSpan = document.createElement('span');
  valueSpan.className = 'value';
  valueSpan.textContent = data.value;



    log.appendChild(entry);
  };

  evtSource.onerror = (err) => {
    console.error('EventSource failed:', err);
    evtSource.close();
    log.textContent = 'Connection lost. Please refresh the page.';
  };
</script>

</body>
</html> 